<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Go AI Assistant API Documentation</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            border-radius: 10px;
            margin-bottom: 2rem;
        }

        .endpoint {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 1.5rem;
            margin: 1rem 0;
            border-radius: 5px;
        }

        .method {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 4px;
            font-weight: bold;
            margin-right: 1rem;
        }

        .path {
            font-family: 'Courier New', monospace;
            font-weight: bold;
            color: #495057;
        }

        .description {
            margin: 1rem 0;
            color: #6c757d;
        }

        .example {
            background: #e9ecef;
            padding: 1rem;
            border-radius: 5px;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        .section {
            margin: 2rem 0;
        }

        .section-title {
            border-bottom: 2px solid #667eea;
            padding-bottom: 0.5rem;
            margin-bottom: 1rem;
        }

        .tag {
            background: #17a2b8;
            color: white;
            padding: 0.2rem 0.5rem;
            border-radius: 3px;
            font-size: 0.8rem;
            margin-left: 1rem;
        }
    </style>
</head>

<body>
    <div class="header">
        <h1>ü§ñ Go AI Assistant API</h1>
        <p>Production-ready AI assistant backend with modular tools, Redis caching, and comprehensive monitoring</p>
        <p><strong>Version:</strong> 1.0 | <strong>Base URL:</strong> http://localhost:8080</p>
    </div>

    <div class="section">
        <h2 class="section-title">üìã Overview</h2>
        <p>The Go AI Assistant provides a powerful API for interacting with AI assistants that can:</p>
        <ul>
            <li>Answer questions using OpenAI GPT models</li>
            <li>Provide real-time weather information</li>
            <li>Get current date/time and holiday information</li>
            <li>Maintain conversation context with session management</li>
            <li>Support stateless clients (Telegram, Web, Mobile)</li>
        </ul>
    </div>

    <div class="section">
        <h2 class="section-title">üîê Authentication</h2>
        <div class="endpoint">
            <div class="method">API Key</div>
            <span>Protected endpoints require <code>X-API-Key</code> header</span>
            <div class="description">
                Some endpoints (like <code>/metrics</code>) require API key authentication.
                Set the <code>API_KEY</code> environment variable in production.
            </div>
        </div>
    </div>

    <div class="section">
        <h2 class="section-title">üí¨ Conversation Endpoints</h2>

        <div class="endpoint">
            <div class="method">POST</div>
            <span class="path">/twirp/chat.ChatService/StartConversation</span>
            <span class="tag">conversations</span>
            <div class="description">
                Start a new conversation with the AI assistant
            </div>
            <div class="example">
                <strong>Request:</strong><br>
                {<br>
                &nbsp;&nbsp;"message": "What's the weather in Barcelona?"<br>
                }<br><br>
                <strong>Response:</strong><br>
                {<br>
                &nbsp;&nbsp;"conversation_id": "507f1f77bcf86cd799439011",<br>
                &nbsp;&nbsp;"title": "Weather in Barcelona",<br>
                &nbsp;&nbsp;"reply": "The weather in Barcelona is sunny with 22¬∞C..."<br>
                }
            </div>
        </div>

        <div class="endpoint">
            <div class="method">POST</div>
            <span class="path">/twirp/chat.ChatService/ContinueConversation</span>
            <span class="tag">conversations</span>
            <div class="description">
                Continue an existing conversation. Supports both direct conversation_id and session-based conversations.
            </div>
            <div class="example">
                <strong>Request (with conversation_id):</strong><br>
                {<br>
                &nbsp;&nbsp;"conversation_id": "507f1f77bcf86cd799439011",<br>
                &nbsp;&nbsp;"message": "What about tomorrow?"<br>
                }<br><br>
                <strong>Request (with session):</strong><br>
                {<br>
                &nbsp;&nbsp;"message": "What about tomorrow?",<br>
                &nbsp;&nbsp;"session_metadata": {<br>
                &nbsp;&nbsp;&nbsp;&nbsp;"platform": "telegram",<br>
                &nbsp;&nbsp;&nbsp;&nbsp;"user_id": "12345",<br>
                &nbsp;&nbsp;&nbsp;&nbsp;"chat_id": "67890"<br>
                &nbsp;&nbsp;}<br>
                }<br><br>
                <strong>Response:</strong><br>
                {<br>
                &nbsp;&nbsp;"reply": "Tomorrow will be partly cloudy with 20¬∞C..."<br>
                }
            </div>
        </div>

        <div class="endpoint">
            <div class="method">POST</div>
            <span class="path">/twirp/chat.ChatService/ListConversations</span>
            <span class="tag">conversations</span>
            <div class="description">
                Get list of recent conversations (messages excluded to avoid large payloads)
            </div>
            <div class="example">
                <strong>Request:</strong><br>
                {}<br><br>
                <strong>Response:</strong><br>
                {<br>
                &nbsp;&nbsp;"conversations": [<br>
                &nbsp;&nbsp;&nbsp;&nbsp;{<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"id": "507f1f77bcf86cd799439011",<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"title": "Weather discussion",<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"timestamp": "2025-11-07T20:15:00Z"<br>
                &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                &nbsp;&nbsp;]<br>
                }
            </div>
        </div>

        <div class="endpoint">
            <div class="method">POST</div>
            <span class="path">/twirp/chat.ChatService/DescribeConversation</span>
            <span class="tag">conversations</span>
            <div class="description">
                Get detailed information about a specific conversation including all messages
            </div>
            <div class="example">
                <strong>Request:</strong><br>
                {<br>
                &nbsp;&nbsp;"conversation_id": "507f1f77bcf86cd799439011"<br>
                }<br><br>
                <strong>Response:</strong><br>
                {<br>
                &nbsp;&nbsp;"conversation": {<br>
                &nbsp;&nbsp;&nbsp;&nbsp;"id": "507f1f77bcf86cd799439011",<br>
                &nbsp;&nbsp;&nbsp;&nbsp;"title": "Weather discussion",<br>
                &nbsp;&nbsp;&nbsp;&nbsp;"timestamp": "2025-11-07T20:15:00Z",<br>
                &nbsp;&nbsp;&nbsp;&nbsp;"messages": [<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"id": "507f1f77bcf86cd799439012",<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"role": "user",<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"content": "What's the weather like?",<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"timestamp": "2025-11-07T20:15:00Z"<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
                &nbsp;&nbsp;&nbsp;&nbsp;]<br>
                &nbsp;&nbsp;}<br>
                }
            </div>
        </div>
    </div>

    <div class="section">
        <h2 class="section-title">‚öôÔ∏è System Endpoints</h2>

        <div class="endpoint">
            <div class="method">GET</div>
            <span class="path">/health</span>
            <span class="tag">system</span>
            <div class="description">
                Health check including MongoDB and Redis connectivity
            </div>
            <div class="example">
                <strong>Response:</strong><br>
                {<br>
                &nbsp;&nbsp;"status": "healthy",<br>
                &nbsp;&nbsp;"checks": {<br>
                &nbsp;&nbsp;&nbsp;&nbsp;"mongodb": "ok",<br>
                &nbsp;&nbsp;&nbsp;&nbsp;"redis": "ok"<br>
                &nbsp;&nbsp;}<br>
                }
            </div>
        </div>

        <div class="endpoint">
            <div class="method">GET</div>
            <span class="path">/ready</span>
            <span class="tag">system</span>
            <div class="description">
                Readiness check for traffic
            </div>
            <div class="example">
                <strong>Response:</strong><br>
                {<br>
                &nbsp;&nbsp;"status": "ready"<br>
                }
            </div>
        </div>

        <div class="endpoint">
            <div class="method">GET</div>
            <span class="path">/metrics</span>
            <span class="tag">system</span>
            <div class="description">
                Prometheus metrics for monitoring (requires API key)
            </div>
            <div class="example">
                <strong>Headers:</strong><br>
                X-API-Key: your-api-key-here<br><br>
                <strong>Response:</strong> Prometheus metrics format
            </div>
        </div>

        <div class="endpoint">
            <div class="method">GET</div>
            <span class="path">/</span>
            <span class="tag">system</span>
            <div class="description">
                Basic service information
            </div>
            <div class="example">
                <strong>Response:</strong><br>
                Hi, my name is Clippy!
            </div>
        </div>
    </div>

    <div class="section">
        <h2 class="section-title">üõ†Ô∏è Available Tools</h2>
        <ul>
            <li><strong>get_weather</strong> - Get current weather information for any location</li>
            <li><strong>get_today_date</strong> - Get current date and time information</li>
            <li><strong>get_holidays</strong> - Get holiday information for different regions</li>
        </ul>
    </div>

    <div class="section">
        <h2 class="section-title">üîß Quick Start</h2>
        <div class="example">
            # Start services<br>
            docker-compose up -d<br>
            make migrate-up<br><br>
            # Start server<br>
            go run ./cmd/server<br><br>
            # Test API<br>
            curl -X POST http://localhost:8080/twirp/chat.ChatService/StartConversation \<br>
            -H "Content-Type: application/json" \<br>
            -d '{"message": "Hello!"}'
        </div>
    </div>

    <div class="section">
        <h2 class="section-title">üìö Additional Resources</h2>
        <ul>
            <li><a href="https://github.com/8adimka/Go_AI_Assistant">GitHub Repository</a></li>
            <li><a href="/docs/">Swagger UI</a> (if available)</li>
            <li><a href="ARCHITECTURE.md">Architecture Documentation</a></li>
            <li><a href="PRODUCTION_READINESS.md">Production Readiness Checklist</a></li>
        </ul>
    </div>
</body>

</html>